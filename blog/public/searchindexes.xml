<?xml version="1.0" encoding="utf-8" standalone="yes"?><search><entry><title>CommonDialogBig</title><url>/post/element-ui/commondialogbig/</url><categories/><tags/><content type="html"><![CDATA[弹窗的显示/隐藏 采用 provide / inject 的方式触发事件【子/孙组件接收父组件注入】
目录结构 . ├── components │ ├── NewAndEdit.vue └── index.vue 举个例子 index.vue文件 &lt;template&gt; &lt;div&gt; &lt;NewAndEdit/&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import NewAndEdit from &#34;./components/NewAndEdit.vue&#34;; export default { name: &#34;parent&#34;, components: { NewAndEdit }, data() { return { // 大弹窗的配置 dialogBig: { visible: false, }, }; }, provide() { return { dialogBigVisible: this.dialogBig, }; }, }; &lt;/script&gt; NewAndEdit.vue 子组件
&lt;template&gt; &lt;CommonDialogBig @confirm=&#34;commonDialogConfirm&#34; @cancel=&#34;commonDialogCancel&#34; :loading=&#34;commonDialogBigLoading&#34; &gt; &lt;el-form&gt; &lt;!-- form 表单部分 --&gt; &lt;/el-form&gt; &lt;/CommonDialogBig&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#34;parent&#34;, components: { Son }, data() { return { commonDialogBigLoading: false, // 大弹窗确定按钮的loading	}; }, methods: { /* 大弹窗的取消、确认事件 begin */ commonDialogCancel() { console.log(&#34;大弹窗-子组件取消了&#34;); this.dialogBigVisible.visible = false; }, commonDialogConfirm() { console.log(&#34;大弹窗-子组件确认了&#34;); this.commonDialogBigLoading = true; // 模拟接口请求，给按钮添加loading的效果 setTimeout(() =&gt; { this.commonDialogBigLoading = false; this.dialogBigVisible.visible = false; }, 1000); }, /* 大弹窗的取消、确认事件 end */ }, }; &lt;/script&gt; CommonDialogBig【大弹窗本身】 孙子组件，只做展示，逻辑部分移交给它的父组件NewAndEdit.vue处理】
&lt;template&gt; &lt;el-dialog :visible.sync=&#34;dialogBigVisible.visible&#34; :before-close=&#34;handleBeforeClose&#34; width=&#34;1040px&#34; class=&#34;asset-form&#34; :title=&#34;title&#34; @close=&#34;handleClose&#34;&gt; &lt;!-- dialog 主要的 --&gt; &lt;slot class=&#34;dialog-main&#34;&gt;main&lt;/slot&gt; &lt;template slot=&#34;footer&#34;&gt; &lt;el-button v-if=&#34;showCancelButton&#34; @click=&#34;cancel&#34;&gt;{{ cancelButtonText }}&lt;/el-button&gt; &lt;el-button v-if=&#34;showConfirmButton&#34; :loading=&#34;loading&#34; type=&#34;primary&#34; @click=&#34;confirm&#34;&gt; {{ confirmButtonText }} &lt;/el-button&gt; &lt;/template&gt; &lt;/el-dialog&gt; &lt;/template&gt; &lt;script&gt; /** * @desc: 大弹窗组件。只做展示，逻辑部分移交给它的父组件处理，如：NewAndEdit.vue】 * Options: * title: &#34;标题名称&#34;, // 弹窗的标题，默认值: 标题名称 * showCancelButton: true, // 是否显示取消按钮，默认值: true * showConfirmButton: true, // 是否显示确定按钮，默认值: true * cancelButtonText: &#34;取 消&#34;, // 取消按钮的文本内容，默认值: 取 消 * confirmButtonText: &#34;确 定&#34;, // 确定按钮的文本内容，默认值: 确 定 * Other: * 采用 provide/inject 的方式触发事件【子/孙组件接收了父组件注入】 * @author: zhang lin * @update: 2023-03-13 */ export default { name: &#34;&#34;, inject: [&#34;dialogBigVisible&#34;], props: { loading: { type: Boolean, default: false, }, }, data() { return { title: &#34;标题名称&#34;, // 弹窗的标题，默认值: 标题名称 showCancelButton: true, // 是否显示取消按钮，默认值: true showConfirmButton: true, // 是否显示确定按钮，默认值: true cancelButtonText: &#34;取 消&#34;, // 取消按钮的文本内容，默认值: 取 消 confirmButtonText: &#34;确 定&#34;, // 确定按钮的文本内容，默认值: 确 定 }; }, created() { const { title, showCancelButton, showConfirmButton, cancelButtonText, confirmButtonText } = this.dialogBigVisible; // 大弹窗文本内容替换 if (typeof title === &#34;string&#34; &amp;&amp; title) { this.title = title; } // 隐藏取消按钮 if (typeof showCancelButton === &#34;boolean&#34; &amp;&amp; !showCancelButton) { this.showCancelButton = showCancelButton; } // 隐藏确认按钮 if (typeof showConfirmButton === &#34;boolean&#34; &amp;&amp; !showConfirmButton) { this.showConfirmButton = showConfirmButton; } // 取消按钮文本内容替换 if (typeof cancelButtonText === &#34;string&#34; &amp;&amp; cancelButtonText) { this.cancelButtonText = cancelButtonText; } // 确认按钮文本内容替换 if (typeof confirmButtonText === &#34;string&#34; &amp;&amp; confirmButtonText) { this.confirmButtonText = confirmButtonText; } }, methods: { handleBeforeClose() { // 关闭弹窗的示例 // this.dialogBigVisible.visible = false; }, handleClose() {}, cancel() { this.$emit(&#34;cancel&#34;); }, confirm() { this.$emit(&#34;confirm&#34;); }, }, }; &lt;/script&gt; &lt;style lang=&#34;scss&#34; scoped&gt; ::v-deep .el-dialog__footer { padding: 0 24px 24px; } &lt;/style&gt; Options 参数 说明 类型 默认值 title 弹窗的标题 string 大弹窗 showCancelButton 是否显示取消按钮 boolean true showConfirmButton 是否显示确定按钮 boolean true cancelButtonText 取消按钮的文本内容 string 取 消 confirmButtonText 确定按钮的文本内容 string 确 定 ]]></content></entry></search>